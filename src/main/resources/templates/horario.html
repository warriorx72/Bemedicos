<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="x-ua-compatible" content="ie=edge">

<title>M&eacute;dico</title>
<link rel="icon" type="image/png" href="dist/img/apple-icon-60x60.png">
<!-- Font Awesome Icons -->
<link rel="stylesheet" href="plugins/fontawesome-free/css/all.min.css">
<!-- IonIcons -->
<link rel="stylesheet"
	href="http://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
<!-- Theme style -->
<link rel="stylesheet" href="dist/css/adminlte.min.css">
<!-- Google Font: Source Sans Pro -->
<link
	href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700"
	rel="stylesheet">
</head>
<!--
BODY TAG OPTIONS:
=================
Apply one or more of the following classes to to the body tag
to get the desired effect
|---------------------------------------------------------|
|LAYOUT OPTIONS | sidebar-collapse                        |
|               | sidebar-mini                            |
|---------------------------------------------------------|
-->
<style>
.estilochingon {
	position: relative;
	display: block;
	min-height: 1.5rem;
	padding-top: 0.4rem;
	padding-left: 8.5rem;
}

.form-list {
	padding: 3px;
}

.form-list2 {
	padding: 7px;
}

ul {
	padding-left: 0px;
	list-style-type: none;
}
</style>
<body class="hold-transition sidebar-mini">
	<div class="wrapper">
		<div th:include="navegacion.html" th:remove="tag"></div>
		<!-- Navbar -->
		<nav
			class="main-header navbar navbar-expand navbar-white navbar-light">
			<!-- Left navbar links -->
			<ul class="navbar-nav">
				<li class="nav-item"><a class="nav-link" data-widget="pushmenu"
					href="#"><i class="fas fa-bars"></i></a></li>
			</ul>

			<!-- Right navbar links -->
			<ul class="navbar-nav ml-auto">
				<li class="nav-item"><a th:href="@{/logout}" class="btn"> <i
						class="fas fa-sign-out-alt"></i>
				</a></li>
			</ul>
		</nav>
		<!-- /.navbar -->
		<!-- Content Wrapper. Contains page content -->
		<div class="content-wrapper">
			<!-- Content Header (Page header) -->
			<div class="content-header">
				<div class="container-fluid">
					<div class="row mb-2">
						<div class="col-sm-6">
							<h1 class="m-0 text-dark">Crear agenda</h1>
						</div>
						<!-- /.col -->
						<div class="col-sm-6">
							<ol class="breadcrumb float-sm-right">
								<li class="breadcrumb-item"><a href="#">Inicio</a></li>
								<li class="breadcrumb-item active">Crear Agenda</li>
							</ol>
						</div>
						<!-- /.col -->
					</div>
					<!-- /.row -->
				</div>
				<!-- /.container-fluid -->
			</div>
			<!-- /.content-header -->

			<!-- Main content -->
			<div class="content">
				<div class="container-fluid">
					<div class="row">
						<div class="col-md-12">
							<!-- Input addon -->
							<div class="card card-info">
								<div class="card-header">
									<h3 class="card-title">Horario laboral</h3>
								</div>
								<!-- /.card-body -->
								<div class="card-body"></div>
								<form action="#" th:action="@{/horario}" th:object="${horario}"
									method="post">
									<fieldset>
										<div class="offset-sm-4 col-sm-4">
											<label class="">Duraci&oacute;n de cita</label> <select
												id="duracion" class="form-control form-group"
												name="duracionSelect">
												<option th:selected="${qui}" value="15">15 minutos</option>
												<option th:selected="${tre}" value="30">30 minutos</option>
												<option th:selected="${cua}" value="45">45 minutos</option>
												<option th:selected="${ses}" value="60">60 minutos</option>
											</select>
										</div>
										<div class="row">
											<div class="col-sm-3"></div>
											<div class="col-sm-2">
												<label style="margin-left: 50px;">Día</label>
											</div>
											<div class="col-sm-2 text-center">
												<label>Hora de inicio</label>
											</div>
											<div class="col-sm-2 text-center">
												<label>Hora de cierre</label>
											</div>
											<div class="col-sm-3"></div>
										</div>

										<div class="row">
											<div class="col-sm-3"></div>
											<div class="col-sm-1">
												<ul th:each="dia : ${dias}">
													<li><label th:text="${dia}" class="form-list"></label></li>
												</ul>
											</div>
											<div class="col-sm-1">
												<ul th:each="horario, itemStat : *{horarios}"
													class="form-list2">

													<li><input type="checkbox" name="dia" value="0"
														th:id="${dias[__${itemStat.index}__]}" class="form-list2"
														th:field="*{horarios[__${itemStat.index}__].horario_status}"
														th:onclick="habCheck(this.checked,[[${dias[__${itemStat.index}__]+4}]],[[${dias[__${itemStat.index}__]+2}]]);">
													</li>

												</ul>
											</div>

											<div class="col-sm-2">
												<ul th:each="horario, itemStat : *{horarios}">
													<li><input type="time"
														th:id="${dias[__${itemStat.index}__]+4}" disabled step="1"
														class="form-control timepicker"
														th:field="*{horarios[__${itemStat.index}__].horario_hora_inicial}" /></li>
												</ul>
											</div>
											<div class="col-sm-2">
												<ul th:each="horario, itemStat : *{horarios}">
													<li><input type="time"
														th:id="${dias[__${itemStat.index}__]+2}" disabled step="1"
														class="form-control timepicker"
														th:field="*{horarios[__${itemStat.index}__].horario_hora_final}" /></li>
												</ul>
											</div>
											<div class="col-sm-3"></div>

											<div class="">
												<ul th:each="horario, itemStat : *{horarios}">
													<li><input type="hidden"
														th:field="*{horarios[__${itemStat.index}__].horario_id}" /></li>
												</ul>
											</div>

											<div class="">
												<ul th:each="horario, itemStat : *{horarios}">
													<li><input type="hidden"
														th:field="*{horarios[__${itemStat.index}__].medico_id}" /></li>
												</ul>
											</div>
										</div>

									</fieldset>
									<div class="card-footer">
										<button type="submit" id="submitButton" th:value="Save"
											class="btn bg-gradient-info float-right">Guardar</button>
									</div>


								</form>
							</div>

						</div>
					</div>
					<!-- /.row -->
				</div>
				<!-- /.container-fluid -->
				<div class="modal fade" id="modal-default">
					<div class="modal-dialog modal-sm">
						<div class="modal-content">
							<div class="modal-header">
								<h4 class="modal-title">Nombre del usuario</h4>
								<button type="button" class="close" data-dismiss="modal"
									aria-label="Close">
									<span aria-hidden="true">&times;</span>
								</button>
							</div>
							<div class="modal-body">
								<p>¿Desea cerrar la sesi&oacute;n?</p>
							</div>
							<div class="modal-footer justify-content-between">
								<button type="button" class="btn btn-danger"
									data-dismiss="modal">No</button>
								<button type="submit" class="btn btn-info" th:href="@{/login}">Si</button>
							</div>
						</div>
						<!-- /.modal-content -->
					</div>
					<!-- /.modal-dialog -->
				</div>
				<!-- /.modal -->
			</div>
			<!-- /.content -->
		</div>
		<!-- /.content-wrapper -->

		<!-- Control Sidebar -->
		<aside class="control-sidebar control-sidebar-dark">
			<!-- Control sidebar content goes here -->
		</aside>
		<!-- /.control-sidebar -->

		<!-- Main Footer -->
		<footer class="main-footer"> </footer>
	</div>
	<!-- ./wrapper -->

	<!-- REQUIRED SCRIPTS -->

	<!-- jQuery -->
	<script src="plugins/jquery/jquery.min.js"></script>
	<!-- Bootstrap -->
	<script src="plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
	<!-- AdminLTE -->
	<script src="dist/js/adminlte.js"></script>

	<!-- OPTIONAL SCRIPTS -->
	<script src="plugins/chart.js/Chart.min.js"></script>
	<script src="dist/js/demo.js"></script>
	<script src="dist/js/pages/dashboard3.js"></script>

	<script type="text/javascript">
		function changeClassById() {
			document.getElementById("nav3").className = "nav-link active";
			document.getElementById("menu3").className = "nav-item has-treeview menu-open";
		}
		window.onload = changeClassById();
	</script>
	<script th:inline="javascript">
		function habCheck(value, value2, value3) {

			if (value == true) {
				// habilitamos
				
				document.getElementById(value2).disabled = false;
				document.getElementById(value2).required = true;

				document.getElementById(value3).disabled = false;
				document.getElementById(value3).required = true;

			} else if (value == false) {
				// deshabilitamos
				
				document.getElementById(value2).disabled = true;
				document.getElementById(value2).required = false;
				document.getElementById(value2).value = "";


				
				document.getElementById(value3).disabled = true;
				document.getElementById(value3).required = false;
				document.getElementById(value3).value = "";

			}
		}

	</script>

	<script th:inline="javascript" th:each="semana : ${semanas}">
	$( document ).ready(function() {
	    console.log( [[${semana.horario_status}]] );
	
	   var value = [[${semana.horario_status}]];
	   var value2 = [[${semana.horario_dia}+4]];
	   var value3 = [[${semana.horario_dia}+2]];
	   
	    
	 if (value == true) {
			// habilitamos
			
			document.getElementById(value2).disabled = false;
			document.getElementById(value2).required = true;

			document.getElementById(value3).disabled = false;
			document.getElementById(value3).required = true;

		} else if (value == false) {
			// deshabilitamos

			document.getElementById(value2).disabled = true;
			document.getElementById(value2).required = false;
			
			document.getElementById(value3).disabled = true;
			document.getElementById(value3).required = false;

		} 
		 
	});
	</script>

	<script th:inline="javascript" th:each="dia : ${dias}">
		$([['#'+${dia}+2]]).change(function() {
			$(".alert").remove();
			var horaInicio = $([['#'+${dia}+4]]).val();
			console.log(horaInicio);
			var horaFin = $([['#'+${dia}+2]]).val();
			console.log(horaFin);
			if (horaInicio >= horaFin) {
				alert("La hora de cierre debe ser mayor que la hora de apertura");
				$([['#'+${dia}+2]]).val("");
			}
		})
	</script>
</body>
</html>