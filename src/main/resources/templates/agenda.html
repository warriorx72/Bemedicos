<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="x-ua-compatible" content="ie=edge">

<title>M&eacute;dico</title>
<link rel="icon" type="image/png" href="dist/img/apple-icon-60x60.png">
<!-- Font Awesome Icons -->
<link rel="stylesheet" href="plugins/fontawesome-free/css/all.min.css">
<!-- IonIcons -->
<link rel="stylesheet"
	href="http://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
<!-- Theme style -->
<link rel="stylesheet" href="dist/css/adminlte.min.css">
<!-- Google Font: Source Sans Pro -->
<link
	href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700"
	rel="stylesheet">
</head>
<!--
BODY TAG OPTIONS:
=================
Apply one or more of the following classes to to the body tag
to get the desired effect
|---------------------------------------------------------|
|LAYOUT OPTIONS | sidebar-collapse                        |
|               | sidebar-mini                            |
|---------------------------------------------------------|
-->
<style>
.container-calendar {
	background: #ffffff;
	padding: 15px;
	max-width: 475px;
	margin: 0 auto;
	overflow: auto;
}

.button-container-calendar button {
	cursor: pointer;
	display: inline-block;
	zoom: 1;
	background: #00a2b7;
	color: #fff;
	border: 1px solid #0aa2b5;
	border-radius: 4px;
	padding: 5px 10px;
}

.table-calendar {
	border-collapse: collapse;
	width: 100%;
}

.table-calendar td, .table-calendar th {
	padding: 5px;
	border: 1px solid #e2e2e2;
	text-align: center;
	vertical-align: top;
}

.date-picker.selected {
	font-weight: bold;
	outline: 1px dashed #00BCD4;
}

.date-picker.selected span {
	border-bottom: 2px solid currentColor;
}

/* sunday */
.date-picker:nth-child(1) {
	color: red;
}

/* friday */
.date-picker:nth-child(6) {
	color: green;
}

#monthAndYear {
	text-align: center;
	margin-top: 0;
}

.button-container-calendar {
	position: relative;
	margin-bottom: 1em;
	overflow: hidden;
	clear: both;
}

#previous {
	float: left;
}

#next {
	float: right;
}

.footer-container-calendar {
	margin-top: 1em;
	border-top: 1px solid #dadada;
	padding: 10px 0;
}

.footer-container-calendar select {
	cursor: pointer;
	display: inline-block;
	zoom: 1;
	background: #ffffff;
	color: #585858;
	border: 1px solid #bfc5c5;
	border-radius: 3px;
	padding: 5px 1em;
}
</style>
<body class="hold-transition sidebar-mini">
	<div class="wrapper">
		<!-- Navbar -->
		<nav
			class="main-header navbar navbar-expand navbar-white navbar-light">
			<!-- Left navbar links -->
			<ul class="navbar-nav">
				<li class="nav-item"><a class="nav-link" data-widget="pushmenu"
					href="#"><i class="fas fa-bars"></i></a></li>
			</ul>

			<!-- Right navbar links -->
			<ul class="navbar-nav ml-auto">
				<li class="nav-item"><a class="btn" data-toggle="modal"
					data-target="#modal-default"> <i class="fas fa-sign-out-alt"></i>
				</a></li>
			</ul>
		</nav>
		<!-- /.navbar -->

		<!-- Main Sidebar Container -->
		<aside class="main-sidebar sidebar-light-info elevation-4">
			<!-- Brand Logo -->
			<a href="index3.html" class="brand-link"> <img
				src="dist/img/BMLogo.png" alt="AdminLTE Logo"
				class="brand-image img-circle elevation-3" style="opacity: .8">
				<span class="brand-text font-weight-light">Mi consultorio</span>
			</a>

			<!-- Sidebar -->
			<div class="sidebar">
				<!-- Sidebar user panel (optional) -->
				<div class="user-panel mt-3 pb-3 mb-3 d-flex">
					<div class="image">
						<img class="img-circle elevation-2 img-fluid"
							th:src="@{'/uploads/' + ${medicos.medico_foto}}" />
					</div>
					<div class="info">
						<a th:href="@{perfil}" class="d-block"
							th:text="${persona.persona_nombre} + ${space} + ${persona.persona_ap}"></a>
					</div>
				</div>

				<!-- Sidebar Menu -->
				<nav class="mt-2">
					<ul class="nav nav-pills nav-sidebar flex-column"
						data-widget="treeview" role="menu" data-accordion="false">
						<!-- Add icons to the links using the .nav-icon class
               with font-awesome or any other icon font library -->
						<li class="nav-item has-treeview"><a href="#"
							class="nav-link"> <i class="nav-icon fas fa-tachometer-alt"></i>
								<p>
									Inicio <i class="right fas fa-angle-left"></i>
								</p>
						</a>
							<ul class="nav nav-treeview">
								<li class="nav-item"><a href="./index.html"
									class="nav-link"> <i class="far fa-circle nav-icon"></i>
										<p>Dashboard</p>
								</a></li>
							</ul></li>
						<li class="nav-item has-treeview menu-open"><a href="#"
							class="nav-link active"> <i class="nav-icon fas fa-edit"></i>
								<p>
									Alta pacientes <i class="right fas fa-angle-left"></i>
								</p>
						</a>
							<ul class="nav nav-treeview">
								<li class="nav-item"><a href="alta_paciente.html"
									class="nav-link"> <i class="far fa-circle nav-icon"></i>
										<p>Crear paciente</p>
								</a></li>
							</ul></li>
						<li class="nav-item has-treeview"><a href="#"
							class="nav-link"> <i class="nav-icon fas fa-desktop"></i>
								<p>
									Historial cl&iacute;nico <i class="right fas fa-angle-left"></i>
								</p>
						</a>
							<ul class="nav nav-treeview">
								<li class="nav-item"><a href="historial_clinico.html"
									class="nav-link"> <i class="far fa-circle nav-icon"></i>
										<p>Historiales cl&iacute;nicos</p>
								</a></li>
							</ul>
							<ul class="nav nav-treeview">
								<li class="nav-item"><a href="./index.html"
									class="nav-link"> <i class="far fa-circle nav-icon"></i>
										<p>Notas de evoluci&oacute;n</p>
								</a></li>
							</ul></li>
						<li class="nav-item has-treeview"><a href="#"
							class="nav-link"> <i class="nav-icon fas fa-sticky-note"></i>
								<p>
									Solicitud de estudio <i class="right fas fa-angle-left"></i>
								</p>
						</a>
							<ul class="nav nav-treeview">
								<li class="nav-item"><a href="./index.html"
									class="nav-link"> <i class="far fa-circle nav-icon"></i>
										<p>Solicitud de estudio</p>
								</a></li>
							</ul>
							<ul class="nav nav-treeview">
								<li class="nav-item"><a href="./index.html"
									class="nav-link"> <i class="far fa-circle nav-icon"></i>
										<p>Archivo de pacientes</p>
								</a></li>
							</ul></li>
						<li class="nav-item has-treeview"><a href="#"
							class="nav-link"> <i class="nav-icon fas fa-id-badge"></i>
								<p>
									Mis perfiles <i class="right fas fa-angle-left"></i>
								</p>
						</a>
							<ul class="nav nav-treeview">
								<li class="nav-item"><a href="./index.html"
									class="nav-link"> <i class="far fa-circle nav-icon"></i>
										<p>Listar perfiles</p>
								</a></li>
							</ul>
							<ul class="nav nav-treeview">
								<li class="nav-item"><a href="./index.html"
									class="nav-link"> <i class="far fa-circle nav-icon"></i>
										<p>Perfiles</p>
								</a></li>
							</ul></li>
						<li class="nav-item has-treeview"><a href="#"
							class="nav-link"> <i class="nav-icon fas fa-calendar-alt"></i>
								<p>
									Mi agenda m&eacute;dica <i class="right fas fa-angle-left"></i>
								</p>
						</a>
							<ul class="nav nav-treeview">
								<li class="nav-item"><a href="./index.html"
									class="nav-link"> <i class="far fa-circle nav-icon"></i>
										<p>Crear agenda</p>
								</a></li>
							</ul>
							<ul class="nav nav-treeview">
								<li class="nav-item"><a href="./index.html"
									class="nav-link"> <i class="far fa-circle nav-icon"></i>
										<p>Agendar cita</p>
								</a></li>
							</ul>
							<ul class="nav nav-treeview">
								<li class="nav-item"><a href="./index.html"
									class="nav-link"> <i class="far fa-circle nav-icon"></i>
										<p>Ver mi agenda</p>
								</a></li>
							</ul>
							<ul class="nav nav-treeview">
								<li class="nav-item"><a href="./index.html"
									class="nav-link"> <i class="far fa-circle nav-icon"></i>
										<p>Modificar calendario</p>
								</a></li>
							</ul></li>
						<li class="nav-item has-treeview"><a href="#"
							class="nav-link"> <i class="nav-icon fas fa-users"></i>
								<p>
									Pacientes <i class="right fas fa-angle-left"></i>
								</p>
						</a>
							<ul class="nav nav-treeview">
								<li class="nav-item"><a href="./index.html"
									class="nav-link"> <i class="far fa-circle nav-icon"></i>
										<p>Pacientes referenciados</p>
								</a></li>
							</ul>
							<ul class="nav nav-treeview">
								<li class="nav-item"><a href="./index.html"
									class="nav-link"> <i class="far fa-circle nav-icon"></i>
										<p>Mi estado de cuenta</p>
								</a></li>
							</ul>
							<ul class="nav nav-treeview">
								<li class="nav-item"><a href="./index.html"
									class="nav-link"> <i class="far fa-circle nav-icon"></i>
										<p>Historial</p>
								</a></li>
							</ul>
							<ul class="nav nav-treeview">
								<li class="nav-item"><a href="./index.html"
									class="nav-link"> <i class="far fa-circle nav-icon"></i>
										<p>Mis datos</p>
								</a></li>
							</ul></li>
					</ul>
				</nav>
				<!-- /.sidebar-menu -->
			</div>
			<!-- /.sidebar -->
		</aside>

		<!-- Content Wrapper. Contains page content -->
		<div class="content-wrapper">
			<!-- Content Header (Page header) -->
			<div class="content-header">
				<div class="container-fluid">
					<div class="row mb-2">
						<div class="col-sm-6">
							<h1 class="m-0 text-dark">Alta pacientes</h1>
						</div>
						<!-- /.col -->
						<div class="col-sm-6">
							<ol class="breadcrumb float-sm-right">
								<li class="breadcrumb-item"><a href="#">Inicio</a></li>
								<li class="breadcrumb-item active">Crear paciente</li>
							</ol>
						</div>
						<!-- /.col -->
					</div>
					<!-- /.row -->
				</div>
				<!-- /.container-fluid -->
			</div>
			<!-- /.content-header -->

			<!-- Main content -->
			<div class="content">
				<div class="container-fluid">
					<div class="col-md-12">
						<div class="row">
							<div class="col-md-12">
								<!-- Input addon -->
								<div class="card card-info">
									<div class="card-header">
										<h3 class="card-title">Calendario</h3>
									</div>
									<div class="card-body">
										<h3 id="monthAndYear"></h3>

										<div class="button-container-calendar">
											<button id="previous" onclick="previous()">
												<i class="fas fa-arrow-left"></i>
											</button>
											<button id="next" onclick="next()">
												<i class="fas fa-arrow-right"></i>
											</button>
										</div>

										<table class="table-calendar" id="calendar" data-lang="en">
											<thead id="thead-month"></thead>
											<tbody id="calendar-body"></tbody>
										</table>

										<div class="footer-container-calendar">
											<label for="month">Fecha: </label> <select id="month"
												onchange="jump()">
												<option value=0>Enero</option>
												<option value=1>Febrero</option>
												<option value=2>Marzo</option>
												<option value=3>Abril</option>
												<option value=4>Mayo</option>
												<option value=5>Junio</option>
												<option value=6>Julio</option>
												<option value=7>Agosto</option>
												<option value=8>Septiembre</option>
												<option value=9>Octubre</option>
												<option value=10>Noviembre</option>
												<option value=11>Diciembre</option>
											</select> <select id="year" onchange="jump()"></select>
										</div>
									</div>
									<div class="card-footer">
										<a th:href="@{/citas}" class="btn bg-gradient-info"
											style="color: #fff;">Ver mis citas</a> <a
											th:href="@{/agendar_cita}"
											class="btn bg-gradient-info float-right" style="color: #fff;">Agendar
											cita</a>
									</div>

									<div class="modal fade" id="datos">
										<div class="modal-dialog modal-xl">
											<div class="modal-content">
												<div class="modal-header">
													<h4 class="modal-title">Citas</h4>
													<button type="button" class="close" data-dismiss="modal"
														aria-label="Close">
														<span aria-hidden="true">&times;</span>
													</button>
												</div>
												<div class="modal-body">
													<div class="card-body table-responsive p-0"
														style="height: 300px;">
														<table class="table table-head-fixed" id="tabladatos">
															<thead>
																<tr>
																	<th style="width: 25%;">Nombre Completo</th>
																	<th style="width: 10%;">Fecha</th>
																	<th style="width: 10%;">Hora</th>
																	<th style="width: 20%;">Correo</th>
																	<th style="width: 35%;">Motivo</th>
																</tr>
															</thead>
															<tbody>
																<tr th:each="calendario: ${calendario}">
																	<td
																		th:text="${calendario.nombre} + ' ' + ${calendario.apellidopa} +' '+ ${calendario.apellidoma}"></td>
																	<td th:text="${calendario.fecha_cita}"></td>
																	<td th:text="${calendario.hora_cita}"></td>
																	<td th:text="${calendario.correo}"></td>
																	<td th:text="${calendario.motivo}"></td>
																</tr>
															</tbody>
														</table>
													</div>
												</div>
												<div class="modal-footer justify-content-between">
													<button type="button" class="btn btn-danger"
														data-dismiss="modal">Cerrar</button>
													<button type="submit" class="btn btn-info">Ver
														m&aacute;s citas</button>
												</div>
											</div>
											<!-- /.modal-content -->
										</div>
										<!-- /.modal-dialog -->
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<!-- /.row -->
			</div>
			<!-- /.container-fluid -->
			<div class="modal fade" id="modal-default">
				<div class="modal-dialog modal-sm">
					<div class="modal-content">
						<div class="modal-header">
							<h4 class="modal-title">Nombre del usuario</h4>
							<button type="button" class="close" data-dismiss="modal"
								aria-label="Close">
								<span aria-hidden="true">&times;</span>
							</button>
						</div>
						<div class="modal-body">
							<p>¿Desea cerrar la sesi&oacute;n?</p>
						</div>
						<div class="modal-footer justify-content-between">
							<button type="button" class="btn btn-danger" data-dismiss="modal">No</button>
							<button type="button" class="btn btn-info">Si</button>
						</div>
					</div>
					<!-- /.modal-content -->
				</div>
				<!-- /.modal-dialog -->
			</div>
			<!-- /.modal -->
			<div class="modal fade" id="modal-default2">
				<div class="modal-dialog modal-sm">
					<div class="modal-content">
						<div class="modal-header">
							<h4 class="modal-title">Datos del paciente</h4>
							<button type="button" class="close" data-dismiss="modal"
								aria-label="Close">
								<span aria-hidden="true">&times;</span>
							</button>
						</div>
						<div class="modal-body">
							<p>¿Desea terminar?</p>
						</div>
						<div class="modal-footer justify-content-between">
							<button type="button" class="btn btn-danger" data-dismiss="modal">No</button>
							<button type="submit" class="btn btn-info">Si</button>
						</div>
					</div>
					<!-- /.modal-content -->
				</div>
				<!-- /.modal-dialog -->
			</div>
			<!-- /.modal -->
			<!-- /.modal -->
		</div>
		<!-- /.content -->
	</div>
	<!-- /.content-wrapper -->

	<!-- Control Sidebar -->
	<aside class="control-sidebar control-sidebar-dark">
		<!-- Control sidebar content goes here -->
	</aside>
	<!-- /.control-sidebar -->

	<!-- Main Footer -->
	<footer class="main-footer"> </footer>
	<!-- ./wrapper -->

	<!-- REQUIRED SCRIPTS -->

	<!-- jQuery -->
	<script src="plugins/jquery/jquery.min.js"></script>
	<!-- Bootstrap -->
	<script src="plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
	<!-- AdminLTE -->
	<script src="dist/js/adminlte.js"></script>

	<!--- OPTIONAL SCRIPTS -->
	<script src="plugins/chart.js/Chart.min.js"></script>
	<script src="dist/js/demo.js"></script>
	<script src="dist/js/pages/dashboard3.js"></script>
	<script>
		function generate_year_range(start, end) {
			var years = "";
			for (var year = start; year <= end; year++) {
				years += "<option value='" + year + "'>" + year + "</option>";
			}
			return years;
		}

		today = new Date();
		currentMonth = today.getMonth();
		currentYear = today.getFullYear();
		selectYear = document.getElementById("year");
		selectMonth = document.getElementById("month");

		createYear = generate_year_range(1970, 2050);
		/** or
		 * createYear = generate_year_range( 1970, currentYear );
		 */

		document.getElementById("year").innerHTML = createYear;

		var calendar = document.getElementById("calendar");
		var lang = calendar.getAttribute('data-lang');

		var months = "";
		var days = "";

		var monthDefault = [ "Enero", "Febrero", "Marzo", "Abril", "Mayo",
				"Junio", "Julio", "Agosto", "Septiembre", "Octubre",
				"Noviembre", "Diciembre" ];

		var dayDefault = [ "Dom", "Lun", "Mart", "Mier", "Juev", "Vier", "Sab" ];

		if (lang == "en") {
			months = monthDefault;
			days = dayDefault;
		} else if (lang == "id") {
			months = [ "Januari", "Februari", "Maret", "April", "Mei", "Juni",
					"Juli", "Agustus", "September", "Oktober", "November",
					"Desember" ];
			days = [ "Ming", "Sen", "Sel", "Rab", "Kam", "Jum", "Sab" ];
		} else if (lang == "fr") {
			months = [ "Janvier", "Février", "Mars", "Avril", "Mai", "Juin",
					"Juillet", "Août", "Septembre", "Octobre", "Novembre",
					"Décembre" ];
			days = [ "dimanche", "lundi", "mardi", "mercredi", "jeudi",
					"vendredi", "samedi" ];
		} else {
			months = monthDefault;
			days = dayDefault;
		}

		var $dataHead = "<tr>";
		for (dhead in days) {
			$dataHead += "<th data-days='" + days[dhead] + "'>" + days[dhead]
					+ "</th>";
		}
		$dataHead += "</tr>";

		//alert($dataHead);
		document.getElementById("thead-month").innerHTML = $dataHead;

		monthAndYear = document.getElementById("monthAndYear");
		showCalendar(currentMonth, currentYear);

		function next() {
			currentYear = (currentMonth === 11) ? currentYear + 1 : currentYear;
			currentMonth = (currentMonth + 1) % 12;
			showCalendar(currentMonth, currentYear);
		}

		function previous() {
			currentYear = (currentMonth === 0) ? currentYear - 1 : currentYear;
			currentMonth = (currentMonth === 0) ? 11 : currentMonth - 1;
			showCalendar(currentMonth, currentYear);
		}

		function jump() {
			currentYear = parseInt(selectYear.value);
			currentMonth = parseInt(selectMonth.value);
			showCalendar(currentMonth, currentYear);
		}

		function showCalendar(month, year) {

			var firstDay = (new Date(year, month)).getDay();

			tbl = document.getElementById("calendar-body");

			tbl.innerHTML = "";

			monthAndYear.innerHTML = months[month] + " " + year;
			selectYear.value = year;
			selectMonth.value = month;

			// creating all cells

			var date = 1;
			for (var i = 0; i < 6; i++) {

				var row = document.createElement("tr");

				for (var j = 0; j < 7; j++) {
					if (i === 0 && j < firstDay) {
						cell = document.createElement("td");
						cellText = document.createTextNode("");
						cell.appendChild(cellText);
						row.appendChild(cell);
					} else if (date > daysInMonth(month, year)) {
						break;
					} else {
						cell = document.createElement("td");
						cell.setAttribute("data-date", date);
						cell.setAttribute("data-month", month + 1);
						cell.setAttribute("data-year", year);
						cell.setAttribute("data-month_name", months[month]);
						cell.className = "date-picker";

						cell.innerHTML = "<a data-toggle='modal' data-target='#datos' style='color:#000;'> <span>"
								+ date + "</span></a>";

						if (date === today.getDate()
								&& year === today.getFullYear()
								&& month === today.getMonth()) {
							cell.className = "date-picker selected";
						}
						row.appendChild(cell);
						date++;
					}

				}

				tbl.appendChild(row);
			}

		}

		function daysInMonth(iMonth, iYear) {
			return 32 - new Date(iYear, iMonth, 32).getDate();
		}
	</script>
</body>
</html>
